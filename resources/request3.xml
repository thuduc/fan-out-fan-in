<?xml version="1.0" encoding="UTF-8"?>
<?vnvs?>
<vnml>
    <project>
        <market name="Market1" date="2024-08-30" time="20:16:43">
            <source>Yahoo</source>
            <type>Close</type>
            <currency>USD</currency>
            <rate>0.0412</rate>
            <href>https://finance.yahoo.com/quote/ES=F/history?p=ES=F</href>
        </market>
        <model name="Model1" date="2024-08-30" time="20:16:43">
            <type>Historical</type>
            <process>normal</process>
            <href>https://finance.yahoo.com/quote/ES=F/history?p=ES=F</href>
            <volatility type="implied">
                <hjm>
                    <factor>
                        <term>
                            <sigma>0.1</sigma>
                            <beta>0.2</beta>
                        </term>
                    </factor>
                    <rho>0.3</rho>
                    <tau>0.3</tau>
                </hjm>
            </volatility>
        </model>
        <portfolio>
            <instrument name="Instrument1">
                <cancellableBond>
                    <coupon>
                        <rate>1.12345</rate>
                    </coupon>
                </cancellableBond>
                <volatility>
                    <sigma>0.11111</sigma>
                </volatility>
            </instrument>
            <instrument name="Instrument2">
                <cancellableBond>
                    <coupon>
                        <rate>2.12345</rate>
                    </coupon>
                </cancellableBond>
                <volatility>
                    <sigma>0.22</sigma>
                </volatility>
            </instrument>
            <instrument name="Instrument3">
                <cancellableBond>
                    <coupon>
                        <rate>3.12345</rate>
                    </coupon>
                </cancellableBond>
                <volatility>
                    <sigma>0.11</sigma>
                </volatility>
            </instrument>
        </portfolio>
        <calculator name="Calculator1"/>
        <group name="Group1">
            <valuation name="schedule" use="vn:link(/vnml/project/portfolio, instrument)">
                <market name="market1" date="${select(/vnml/project/market/@date)}" time="20:16:43" groupName="${select(/vnml/project/group[2]/@name)}">
                    <source>Yahoo</source>
                    <type>Close</type>
                    <currency>USD</currency>
                    <rate>0.0412</rate>
                    <href>https://finance.yahoo.com/quote/ES=F/history?p=ES=F</href>
                    <extraField>value1</extraField>
                </market>
                <model name="model1" select="/vnml/project/model[@name='Model1']">
                    <volatility type="implied">
                        <hjm>
                            <factor>
                                <term>
                                    <sigma select="./volatility/sigma"/>
                                    <extraTermField>value1</extraTermField>
                                </term>
                            </factor>
                        </hjm>
                    </volatility>
                    <extraField>value1</extraField>
                </model>
                <calculator select="/vnml/project/calculator[@name='Calculator1']"/>
                <analytics>
                    <evaluation>
                        <date>2025-09-17</date>
                    </evaluation>
                    <price>
                        <amount>1.25</amount>
                    </price>
                </analytics>
                <instrument select="." fromGroup="Group1"/>
            </valuation>
        </group>
        <group name="Group2">
            <valuation name="future" use="vn:link(/vnml/project/group[1], valuation)">
                <market name="market1" select="/vnml/project/market[1]"/>
                <model name="model1" select="/vnml/project/model[1]"/>
                <calculator select="/vnml/project/calculator"/>
                <analytics>
                    <evaluation>
                        <date>2025-10-17</date>
                    </evaluation>
                    <previousPrice>
                        <amount select="./analytics/price/amount"/>
                    </previousPrice>
                    <price>
                        <amount>1.25</amount>
                    </price>
                </analytics>
                <instrument select="./instrument">
                    <cancellableBond>
                        <coupon>
                            <rate select="./analytics/price/amount" group2Attr="val"/>
                        </coupon>
                    </cancellableBond>
                    <customField name="custom1" value="value1"/>
                </instrument>
            </valuation>
        </group>
    </project>
</vnml>
